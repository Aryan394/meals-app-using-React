{"ast":null,"code":"import _toConsumableArray from\"/Users/aryan/Desktop/mealsApp/my-meals-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/aryan/Desktop/mealsApp/my-meals-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/aryan/Desktop/mealsApp/my-meals-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/aryan/Desktop/mealsApp/my-meals-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";var AppContext=/*#__PURE__*/React.createContext();var allMealsUrl='https://www.themealdb.com/api/json/v1/1/search.php?s=';var randomMealURL=\"https://www.themealdb.com/api/json/v1/1/random.php\";var getFavoritesFromLocalStorage=function getFavoritesFromLocalStorage(){var favorites=localStorage.getItem('favorites');if(favorites){favorites=JSON.parse(localStorage.getItem('favorites'));}else{favorites=[];}return favorites;};var AppProvider=function AppProvider(_ref){var children=_ref.children;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),meals=_useState4[0],setMeals=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),searchTerm=_useState6[0],setSearchTerm=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showModal=_useState8[0],setShowModal=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),selectedMeal=_useState10[0],setSelectedMeal=_useState10[1];var _useState11=useState(getFavoritesFromLocalStorage()),_useState12=_slicedToArray(_useState11,2),favorites=_useState12[0],setFavorites=_useState12[1];var fetchMeals=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var _yield$axios,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setLoading(true);_context.prev=1;_context.next=4;return axios(url);case 4:_yield$axios=_context.sent;data=_yield$axios.data;setMeals(data.meals);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.log(_context.t0.response);case 12:setLoading(false);case 13:case\"end\":return _context.stop();}},_callee,null,[[1,9]]);}));return function fetchMeals(_x){return _ref2.apply(this,arguments);};}();var fetchRandomMeal=function fetchRandomMeal(){fetchMeals(randomMealURL);};var selectMeal=function selectMeal(idMeal,favouriteMeal){// console.log(console.log(idMeal));\nvar meal;if(favouriteMeal){meal=favorites.find(function(meal){return meal.idMeal===idMeal;});}else{meal=meals.find(function(meal){return meal.idMeal===idMeal;});}setSelectedMeal(meal);setShowModal(true);};var closeModal=function closeModal(){setShowModal(false);};var addToFavorites=function addToFavorites(idMeal){// console.log(idMeal);\nvar meal=meals.find(function(meal){return meal.idMeal===idMeal;});var alreadyFavorite=favorites.find(function(meal){return meal.idMeal===idMeal;});if(alreadyFavorite)return;var updatedFavorites=[].concat(_toConsumableArray(favorites),[meal]);setFavorites(updatedFavorites);// console.log(favorites);\nlocalStorage.setItem(\"favorites\",JSON.stringify(updatedFavorites));};var removeFromFavorites=function removeFromFavorites(idMeal){var updatedFavorites=favorites.filter(function(meal){return meal.idMeal!==idMeal;});setFavorites(updatedFavorites);localStorage.setItem(\"favorites\",JSON.stringify(updatedFavorites));};useEffect(function(){if(!searchTerm)return;fetchMeals(allMealsUrl);},[]);useEffect(function(){fetchMeals(allMealsUrl+searchTerm);},[searchTerm]);return/*#__PURE__*/_jsx(AppContext.Provider,{value:{loading:loading,meals:meals,setSearchTerm:setSearchTerm,fetchRandomMeal:fetchRandomMeal,showModal:showModal,selectedMeal:selectedMeal,selectMeal:selectMeal,closeModal:closeModal,addToFavorites:addToFavorites,removeFromFavorites:removeFromFavorites,favorites:favorites},children:children});};var useGlobalContext=function useGlobalContext(){return useContext(AppContext);};export{AppContext,AppProvider,useGlobalContext};","map":{"version":3,"names":["React","useContext","useEffect","useState","axios","jsx","_jsx","AppContext","createContext","allMealsUrl","randomMealURL","getFavoritesFromLocalStorage","favorites","localStorage","getItem","JSON","parse","AppProvider","_ref","children","_useState","_useState2","_slicedToArray","loading","setLoading","_useState3","_useState4","meals","setMeals","_useState5","_useState6","searchTerm","setSearchTerm","_useState7","_useState8","showModal","setShowModal","_useState9","_useState10","selectedMeal","setSelectedMeal","_useState11","_useState12","setFavorites","fetchMeals","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","_yield$axios","data","wrap","_callee$","_context","prev","next","sent","t0","console","log","response","stop","_x","apply","arguments","fetchRandomMeal","selectMeal","idMeal","favouriteMeal","meal","find","closeModal","addToFavorites","alreadyFavorite","updatedFavorites","concat","_toConsumableArray","setItem","stringify","removeFromFavorites","filter","Provider","value","useGlobalContext"],"sources":["/Users/aryan/Desktop/mealsApp/my-meals-app/src/context.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState} from 'react';\n\nimport axios from 'axios';\nconst AppContext = React.createContext()\n\nconst allMealsUrl = 'https://www.themealdb.com/api/json/v1/1/search.php?s=';\nconst randomMealURL = \"https://www.themealdb.com/api/json/v1/1/random.php\";\nconst getFavoritesFromLocalStorage=()=>{\n  let favorites = localStorage.getItem('favorites');\n  if(favorites){\n    favorites = JSON.parse(localStorage.getItem('favorites'));\n  }\n  else{\n    favorites = [];\n  }\n  return favorites;\n}\nconst AppProvider = ({ children }) => {\n  const [loading, setLoading] = useState(false); \n  const [meals, setMeals] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showModal, setShowModal] = useState(false);\n  const [selectedMeal, setSelectedMeal] = useState(null);\n  const [favorites, setFavorites] = useState(getFavoritesFromLocalStorage());\n  \n  const fetchMeals = async(url)=>{\n    setLoading(true);\n      try{\n        const {data} = await axios(url);\n        setMeals(data.meals);      \n      }\n      catch(err){\n        console.log(err.response);\n      }\n    setLoading(false); \n    }\n\n  const fetchRandomMeal=()=>{\n    fetchMeals(randomMealURL);\n  }\n  const selectMeal=(idMeal, favouriteMeal) =>{\n    // console.log(console.log(idMeal));\n    let meal;\n    if(favouriteMeal){\n      meal = favorites.find((meal)=>meal.idMeal === idMeal);\n    }    \n    else{\n      meal = meals.find((meal)=>meal.idMeal === idMeal);\n    }\n    setSelectedMeal(meal);\n    setShowModal(true);\n  }\n  const closeModal= ()=>{\n    setShowModal(false);\n    \n  }\n  const addToFavorites= (idMeal)=>{\n    // console.log(idMeal);\n    const meal = meals.find((meal)=>meal.idMeal === idMeal);\n    const alreadyFavorite = favorites.find((meal)=>meal.idMeal === idMeal);\n    if(alreadyFavorite) return;\n    const updatedFavorites = [...favorites, meal];\n    setFavorites(updatedFavorites);\n    // console.log(favorites);\n    localStorage.setItem(\"favorites\", JSON.stringify(updatedFavorites));\n    \n  }\n  const removeFromFavorites= (idMeal)=>{\n    const updatedFavorites = favorites.filter((meal)=> meal.idMeal!== idMeal);\n    setFavorites(updatedFavorites);\n    localStorage.setItem(\"favorites\", JSON.stringify(updatedFavorites));\n  }\n  useEffect(() => {\n    if(!searchTerm) return;\n    fetchMeals(allMealsUrl);\n  }, [])\n  useEffect(() => {\n    fetchMeals(allMealsUrl+searchTerm);\n  }, [searchTerm])\n  return <AppContext.Provider value={{loading, meals, setSearchTerm, fetchRandomMeal, showModal, selectedMeal, selectMeal, closeModal, addToFavorites, removeFromFavorites, favorites}}>\n    {children}\n  </AppContext.Provider>\n}\n\n\nconst useGlobalContext = () => {\n  return useContext(AppContext);\n}\n\nexport { AppContext, AppProvider, useGlobalContext };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}